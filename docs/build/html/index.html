
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    
    <title>⚡ 📇 token2index: A lightweight but powerful library for token indexing &#8212; token2index 1.0.0 documentation</title>

    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-4.3.1-dist/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinxbootstrap4.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/bootstrap-4.3.1-dist/js/bootstrap.min.js"></script>
    <script src="_static/sphinxbootstrap4.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
  <nav class="navbar navbar-expand-md  fixed-top navbar-dark bg-dark flex-wrap">
    <button class="navbar-toggler ml-auto py-2" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar2">
      &#9776;
    </button>
      <div class="navbar-collapse collapse" id="exCollapsingNavbar2">
           <a class="navbar-brand py-1" href="#">
                  token2index
          </a>
          <span class="navbar-text navbar-version pb-0 pt-1"><b>1.0.0</b></span>
          <ul class="navbar-nav mr-auto">
          
              <li class="nav-item dropdown d-none d-sm-block" id="navbar-pages">
                  <a class="nav-link dropdown-toggle" data-toggle="dropdown">Pages</a>
                  <ul class="dropdown-menu">
                  
                  </ul>
              </li>
          </ul>
          <div class="dropdown-divider d-block d-sm-none mb-4"></div>
             
<form class="form-inline" action="search.html" method="get">
  <input type="text" name="q" class="form-control" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <!--<div class="row hidden-sm-up">
          <div class="collapse navbar-toggleable-xs container" id="exCollapsingNavbar2">
              <div class="container">
             　　 <a class="navbar-brand" href="#">
                      token2index
                  </a>
              </div>
              <ul class="nav navbar-nav">
              </ul>
              <div class="dropdown-divider"></div>
              <div class="navbar-text">search<div>
              
<form class="form-inline" action="search.html" method="get">
  <input type="text" name="q" class="form-control" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          </div>
      </div>-->
    </nav>
  </div>

    <div class="related d-flex justify-content-between bg-light flex-wrap" role="navigation" aria-label="related navigation">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">token2index 1.0.0 documentation</a></li>
            <li class="breadcrumb-item active">⚡ 📇 token2index: A lightweight but powerful library for token indexing</li>
        </ol>
       <div>
          <div class="btn-group btn-group-sm" role="group" aria-label="Basic example">
           </div>
       </div>
    </div>

  <div class="main container-fluid">
    <div class="row"> 
      <div class="sphinxsidebar d-none d-md-block">
        <div class="sphinxsidebarwrapper">          
            <h4>Table Of Contents</h4>
            
            
                <!-- Local TOC -->
                <div class="local-toc"><ul>
<li><a class="reference internal" href="#">⚡ 📇 token2index: A lightweight but powerful library for token indexing</a><ul>
<li><a class="reference internal" href="#sparkles-feature-highlights">✨ Feature Highlights</a></li>
<li><a class="reference internal" href="#electric-plug-compatibility-with-other-frameworks-numpy-pytorch-tensorflow">🔌 Compatibility with other frameworks (Numpy, PyTorch, Tensorflow)</a></li>
<li><a class="reference internal" href="#inbox-tray-installation">📥 Installation</a></li>
<li><a class="reference internal" href="#mortar-board-citing">🎓 Citing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-t2i">Documentation</a></li>
</ul>
</div>
            
          
<div id="searchbox" style="display: none">
    <form class="form search" action="search.html" method="get">
      <input type="text" name="q" class="form-control" placeholder="Search..." />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>

<script type="text/javascript">$('#searchbox').show(0);</script>
  <ul class="this-page-menu list-unstyled text-right">
    <li><a href="_sources/index.rst.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
        </div>
      </div> 

      <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="zap-card-index-token2index-a-lightweight-but-powerful-library-for-token-indexing">
<h1>⚡ 📇 token2index: A lightweight but powerful library for token indexing<a class="headerlink" href="#zap-card-index-token2index-a-lightweight-but-powerful-library-for-token-indexing" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="https://travis-ci.org/github/Kaleidophon/token2index/builds"><img alt="Build" src="https://travis-ci.org/Kaleidophon/token2index.svg?branch=master" /></a>
<a class="reference external image-reference" href="https://token2index.readthedocs.io/en/latest/?badge=latest"><img alt="Documentation Status" src="https://readthedocs.org/projects/token2index/badge/?version=latest" /></a>
<a class="reference external image-reference" href="https://coveralls.io/github/Kaleidophon/token2index?branch=master"><img alt="Coverage Status" src="https://coveralls.io/repos/github/Kaleidophon/token2index/badge.svg?branch=master" /></a>
<a class="reference external image-reference" href="https://www.gnu.org/licenses/gpl-3.0"><img alt="License: GPL v3" src="https://img.shields.io/badge/License-GPLv3-blue.svg" /></a>
<a class="reference external image-reference" href="https://github.com/python/black"><img alt="Code style: black" src="https://img.shields.io/badge/code%20style-black-000000.svg" /></a>
<p><code class="docutils literal notranslate"><span class="pre">token2index</span></code> is a small yet powerful library facilitating the fast and easy creation of a data structure mapping
tokens to indices, primarily aimed at applications for Natural Language Processing. The library is fully tested, and
does not require any additional requirements. The documentation can be found <a class="reference external" href="https://token2index.readthedocs.io/en/latest/">here</a>, some feature highlights are
shown below.</p>
<p><strong>Who / what is this for?</strong></p>
<p>This class is written to be used for NLP applications where we want to assign an index to every word in a sequence e.g. to be later used to look up corresponding
word embeddings. Building an index and indexing batches of sequences for Deep Learning models using frameworks like PyTorch or Tensorflow are common steps but are often written from
scratch every time. This package provides a ready-made package combining many useful features, like reading vocabulary files, building indices from a corpus or indexing entire batches in one single
function call, all while being fully tested.</p>
<div class="section" id="sparkles-feature-highlights">
<h2>✨ Feature Highlights<a class="headerlink" href="#sparkles-feature-highlights" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><strong>Building and extending vocab</strong></p>
<blockquote>
<div><p>One way to build the index from a corpus is using the build() function:</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   &gt;&gt;&gt; from t2i import T2I
   &gt;&gt;&gt; t2i = T2I.build([&quot;colorless green ideas dream furiously&quot;, &quot;the horse raced past the barn fell&quot;])
   &gt;&gt;&gt; t2i
   T2I(Size: 13, unk_token: &lt;unk&gt;, eos_token: &lt;eos&gt;, pad_token: &lt;pad&gt;, {&#39;colorless&#39;: 0, &#39;green&#39;: 1, &#39;ideas&#39;: 2, &#39;dream&#39;: 3, &#39;furiously&#39;: 4, &#39;the&#39;: 5, &#39;horse&#39;: 6, &#39;raced&#39;: 7, &#39;past&#39;: 8, &#39;parn&#39;: 9, &#39;fell&#39;: 10, &#39;&lt;unk&gt;&#39;: 11, &#39;&lt;eos&gt;&#39;: 12, &#39;&lt;pad&gt;&#39;: 13})

The index can always be extended again later using ``extend()``\ :
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t2i</span> <span class="o">=</span> <span class="n">t2i</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;completely new words&quot;</span><span class="p">)</span>
<span class="go">T2I(Size: 16, unk_token: &lt;unk&gt;, eos_token: &lt;eos&gt;, pad_token: &lt;pad&gt;, {&#39;colorless&#39;: 0, &#39;green&#39;: 1, &#39;ideas&#39;: 2, &#39;dream&#39;: 3, &#39;furiously&#39;: 4, &#39;the&#39;: 5, &#39;horse&#39;: 6, &#39;raced&#39;: 7, &#39;past&#39;: 8, &#39;barn&#39;: 9, &#39;fell&#39;: 10, &#39;completely&#39;: 13, &#39;new&#39;: 14, &#39;words&#39;: 15, &#39;&lt;unk&gt;&#39;: 16, &#39;&lt;eos&gt;&#39;: 17, &#39;&lt;pad&gt;&#39;: 18})</span>
</pre></div>
</div>
</li>
<li><p><strong>Easy indexing (of batches)</strong></p>
<blockquote>
<div><p>Index multiple sentences at once in a single function call!</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   &gt;&gt;&gt; t2i.index([&quot;the green horse raced &lt;eos&gt;&quot;, &quot;ideas are a dream &lt;eos&gt;&quot;])
   [[5, 1, 6, 7, 12], [2, 11, 11, 3, 12]]

where unknown tokens are always mapped to ``unk_token``.
</pre></div>
</div>
</li>
<li><p><strong>Easy conversion back to strings</strong></p>
<blockquote>
<div><p>Reverting indices back to strings is equally as easy:</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t2i</span><span class="o">.</span><span class="n">unindex</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="go">&#39;the new &lt;unk&gt; dream horse&#39;</span>
</pre></div>
</div>
</li>
<li><p><strong>Automatic padding</strong></p>
<blockquote>
<div><p>You are indexing multiple sentences of different length and want to add padding? No problem! <code class="docutils literal notranslate"><span class="pre">index()</span></code> has two
options available via the <code class="docutils literal notranslate"><span class="pre">pad_to</span></code> argument. The first is padding to the maximum length of all the sentences:</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="o">&gt;&gt;&gt;</span> <span class="n">padded_sents</span> <span class="o">=</span> <span class="n">t2i</span><span class="o">.</span><span class="n">index</span><span class="p">([</span><span class="s2">&quot;the green horse raced &lt;eos&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;ideas &lt;eos&gt;&quot;</span><span class="p">],</span> <span class="n">pad_to</span><span class="o">=</span><span class="s2">&quot;max&quot;</span><span class="p">)</span>
   <span class="o">&gt;&gt;&gt;</span> <span class="n">padded_sents</span>
   <span class="p">[[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">13</span><span class="p">]]</span>
   <span class="o">&gt;&gt;&gt;</span> <span class="n">t2i</span><span class="o">.</span><span class="n">unindex</span><span class="p">(</span><span class="n">padded_sents</span><span class="p">)</span>
   <span class="p">[[</span><span class="s1">&#39;the green horse raced &lt;eos&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;ideas &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;&#39;</span><span class="p">]]</span>

<span class="n">Alternatively</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">also</span> <span class="n">pad</span> <span class="n">to</span> <span class="n">a</span> <span class="n">pre</span><span class="o">-</span><span class="n">defined</span> <span class="n">length</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">padded_sents</span> <span class="o">=</span> <span class="n">t2i</span><span class="o">.</span><span class="n">index</span><span class="p">([</span><span class="s2">&quot;the green horse &lt;eos&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;past ideas &lt;eos&gt;&quot;</span><span class="p">],</span> <span class="n">pad_to</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">padded_sents</span>
<span class="go">[[5, 1, 6, 12, 13], [8, 2, 12, 13, 13]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t2i</span><span class="o">.</span><span class="n">unindex</span><span class="p">(</span><span class="n">padded_sents</span><span class="p">)</span>
<span class="go">[[&#39;the green horse &lt;eos&gt; &lt;pad&gt;&#39;, &#39;past ideas &lt;eos&gt; &lt;pad&gt; &lt;pad&gt;&#39;]]</span>
</pre></div>
</div>
</li>
<li><p><strong>Vocab from file</strong></p>
<blockquote>
<div><p>Using <code class="docutils literal notranslate"><span class="pre">T2I.from_file()</span></code>, the index can be created directly by reading from an existing vocab file.
Refer to its documentation <a class="reference external" href="https://token2index.readthedocs.io/en/latest/#t2i.T2I.from_file">here</a> for more info.</p>
</div></blockquote>
</li>
<li><p><strong>Fixed memory size</strong></p>
<blockquote>
<div><p>Although the <code class="docutils literal notranslate"><span class="pre">defaultdict</span></code> class from Python’s <code class="docutils literal notranslate"><span class="pre">collections</span></code> package also posses the functionality to map unknown
keys to a certain value, it grows in size for every new key. <code class="docutils literal notranslate"><span class="pre">T2I</span></code> memory size stays fixed after the index is built.</p>
</div></blockquote>
</li>
<li><p><strong>Support for special tokens</strong></p>
<blockquote>
<div><p>To enable flexibility in modern NLP applications, <code class="docutils literal notranslate"><span class="pre">T2I</span></code> allows for an arbitrary number of special tokens (like a
masking or a padding token) during init!</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t2i</span> <span class="o">=</span> <span class="n">T2I</span><span class="p">(</span><span class="n">special_tokens</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;&lt;mask&gt;&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t2i</span>
<span class="go">T2I(Size: 3, unk_token: &lt;unk&gt;, eos_token: &lt;eos&gt;, {&#39;&lt;unk&gt;&#39;: 0, &#39;&lt;eos&gt;&#39;: 1, &#39;&lt;mask&gt;&#39;: 2})</span>
</pre></div>
</div>
</li>
<li><p><strong>Explicitly supported programmer laziness</strong></p>
<blockquote>
<div><p>Too lazy to type? The library saves you a few keystrokes here and there. instead of calling <code class="docutils literal notranslate"><span class="pre">t2i.index(...)</span></code> you can
directly call <code class="docutils literal notranslate"><span class="pre">t2i(...)</span></code> to index one or multiple sequences. Furthermore, key functions like <code class="docutils literal notranslate"><span class="pre">index()</span></code>, <code class="docutils literal notranslate"><span class="pre">unindex()</span></code>,
<code class="docutils literal notranslate"><span class="pre">build()</span></code> and <code class="docutils literal notranslate"><span class="pre">extend()</span></code> support strings or iterables of strings as arguments alike.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="electric-plug-compatibility-with-other-frameworks-numpy-pytorch-tensorflow">
<h2>🔌 Compatibility with other frameworks (Numpy, PyTorch, Tensorflow)<a class="headerlink" href="#electric-plug-compatibility-with-other-frameworks-numpy-pytorch-tensorflow" title="Permalink to this headline">¶</a></h2>
<p>It is also ensured that <code class="docutils literal notranslate"><span class="pre">T2I</span></code> is easily compatible with frameworks like Numpy, PyTorch and
Tensorflow, without needing them as requirements:</p>
<p><strong>Numpy</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">t2i</span><span class="o">.</span><span class="n">index</span><span class="p">([</span><span class="s2">&quot;the new words are ideas &lt;eos&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;the green horse &lt;eos&gt; &lt;pad&gt; &lt;pad&gt;&quot;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span>
<span class="go">array([[ 5, 15, 16, 17,  2, 18],</span>
<span class="go">   [ 5,  1,  6, 18, 19, 19]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t2i</span><span class="o">.</span><span class="n">unindex</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">[&#39;the new words &lt;unk&gt; ideas &lt;eos&gt;&#39;, &#39;the green horse &lt;eos&gt; &lt;pad&gt; &lt;pad&gt;&#39;]</span>
</pre></div>
</div>
<p><strong>PyTorch</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">torch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">LongTensor</span><span class="p">(</span><span class="n">t2i</span><span class="o">.</span><span class="n">index</span><span class="p">([</span><span class="s2">&quot;the new words are ideas &lt;eos&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;the green horse &lt;eos&gt; &lt;pad&gt; &lt;pad&gt;&quot;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span>
<span class="go">tensor([[ 5, 15, 16, 17,  2, 18],</span>
<span class="go">    [ 5,  1,  6, 18, 19, 19]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t2i</span><span class="o">.</span><span class="n">unindex</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">[&#39;the new words &lt;unk&gt; ideas &lt;eos&gt;&#39;, &#39;the green horse &lt;eos&gt; &lt;pad&gt; &lt;pad&gt;&#39;]</span>
</pre></div>
</div>
<p><strong>Tensorflow</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="nn">tf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">convert_to_tensor</span><span class="p">(</span><span class="n">t2i</span><span class="o">.</span><span class="n">index</span><span class="p">([</span><span class="s2">&quot;the new words are ideas &lt;eos&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;the green horse &lt;eos&gt; &lt;pad&gt; &lt;pad&gt;&quot;</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">tf</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span>
<span class="go">tensor([[ 5, 15, 16, 17,  2, 18],</span>
<span class="go">    [ 5,  1,  6, 18, 19, 19]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t2i</span><span class="o">.</span><span class="n">unindex</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">[&#39;the new words &lt;unk&gt; ideas &lt;eos&gt;&#39;, &#39;the green horse &lt;eos&gt; &lt;pad&gt; &lt;pad&gt;&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="inbox-tray-installation">
<h2>📥 Installation<a class="headerlink" href="#inbox-tray-installation" title="Permalink to this headline">¶</a></h2>
<p>Installation can simply be done using <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="n">token2index</span>
</pre></div>
</div>
</div>
<div class="section" id="mortar-board-citing">
<h2>🎓 Citing<a class="headerlink" href="#mortar-board-citing" title="Permalink to this headline">¶</a></h2>
<p>If you use <code class="docutils literal notranslate"><span class="pre">token2index</span></code> for research purposes, please cite the library using the following citation info:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@misc</span><span class="p">{</span><span class="n">ulmer2020token2index</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="n">token2index</span><span class="p">:</span> <span class="n">A</span> <span class="n">lightweight</span> <span class="n">but</span> <span class="n">powerful</span> <span class="n">library</span> <span class="k">for</span> <span class="n">token</span> <span class="n">indexing</span><span class="p">},</span>
    <span class="n">author</span><span class="o">=</span><span class="p">{</span><span class="n">Ulmer</span><span class="p">,</span> <span class="n">Dennis</span><span class="p">},</span>
    <span class="n">journal</span><span class="o">=</span><span class="p">{</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">Kaleidophon</span><span class="o">/</span><span class="n">token2index</span><span class="p">},</span>
    <span class="n">year</span><span class="o">=</span><span class="p">{</span><span class="mi">2020</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="module-t2i">
<span id="documentation"></span><h1>Documentation<a class="headerlink" href="#module-t2i" title="Permalink to this headline">¶</a></h1>
<p>Define a lightweight data structure to store and look up the indices belonging to arbitrary tokens.
Originally based on the <a class="reference external" href="https://github.com/i-machine-think/diagnnose">diagnnose</a> W2I class.</p>
<dl class="py class">
<dt id="t2i.Index">
<em class="property">class </em><code class="sig-prename descclassname">t2i.</code><code class="sig-name descname">Index</code><a class="headerlink" href="#t2i.Index" title="Permalink to this definition">¶</a></dt>
<dd><p>(Technically) A defaultdict where the value return value for an unknown key is the number of entries. However, it
doesn’t inherit from defaultdict, because functions returning the value for missing keys can only return a constant
value. In this case, after every lookup of a new token, this value for an unknown is incremented by one.</p>
<dl class="py method">
<dt id="t2i.Index.highest_idx">
<em class="property">property </em><code class="sig-name descname">highest_idx</code><a class="headerlink" href="#t2i.Index.highest_idx" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the currently highest index in the index. Return -1 if the index is empty.</p>
</dd></dl>

<dl class="py method">
<dt id="t2i.Index.items">
<code class="sig-name descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Iterable<span class="p">[</span>Tuple<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#t2i.Index.items" title="Permalink to this definition">¶</a></dt>
<dd><p>The same as a usual dict items(), except that the entries are sorted by index (this has otherwise proven to
create problems in Python &lt; 3.6).</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="t2i.T2I">
<em class="property">class </em><code class="sig-prename descclassname">t2i.</code><code class="sig-name descname">T2I</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span>Dict<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span><span class="p">, </span><a class="reference internal" href="#t2i.Index" title="t2i.Index">t2i.Index</a><span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">counter</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>collections.Counter<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_size</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_freq</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">unk_token</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'&lt;unk&gt;'</span></em>, <em class="sig-param"><span class="n">eos_token</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'&lt;eos&gt;'</span></em>, <em class="sig-param"><span class="n">pad_token</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'&lt;pad&gt;'</span></em>, <em class="sig-param"><span class="n">special_tokens</span><span class="p">:</span> <span class="n">Iterable<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">()</span></em><span class="sig-paren">)</span><a class="headerlink" href="#t2i.T2I" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides vocab functionality mapping tokens to indices. After building an index, sentences or a corpus of sentences
can be mapped to the tokens’ assigned indices. There are special tokens for the end of a sentence (eos_token) and
for tokens that were not added to the index during the build phase (unk_token).</p>
<dl class="py method">
<dt id="t2i.T2I.build">
<em class="property">static </em><code class="sig-name descname">build</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">corpus</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>Iterable<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">delimiter</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">' '</span></em>, <em class="sig-param"><span class="n">counter</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>collections.Counter<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_size</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_freq</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">unk_token</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'&lt;unk&gt;'</span></em>, <em class="sig-param"><span class="n">eos_token</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'&lt;eos&gt;'</span></em>, <em class="sig-param"><span class="n">pad_token</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'&lt;pad&gt;'</span></em>, <em class="sig-param"><span class="n">special_tokens</span><span class="p">:</span> <span class="n">Iterable<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">()</span></em><span class="sig-paren">)</span><a class="headerlink" href="#t2i.T2I.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Build token index from scratch on a corpus.</p>
<dl class="simple">
<dt>corpus: Corpus</dt><dd><p>Corpus that is being used to build the index.</p>
</dd>
<dt>delimiter: str</dt><dd><p>Delimiter between tokens. Default is a whitespace ‘ ‘.</p>
</dd>
<dt>counter: Optional[Counter]</dt><dd><p>Counter with token frequencies in corpus. Default is None.</p>
</dd>
<dt>max_size: Optional[int]</dt><dd><p>Maximum size of T2I index. Default is None, which means no maximum size.</p>
</dd>
<dt>min_freq: int</dt><dd><p>Minimum frequency of a token for it to be included in the index. Default is 1.</p>
</dd>
<dt>unk_token: str</dt><dd><p>Token that should be used for unknown words. Default is ‘STD_UNK’.</p>
</dd>
<dt>eos_token: str</dt><dd><p>Token that marks the end of a sequence. Default is ‘&lt;eos&gt;’.</p>
</dd>
<dt>pad_token: str</dt><dd><p>Padding token. Default is ‘&lt;pad&gt;’.</p>
</dd>
<dt>special_tokens: Iterable[str]</dt><dd><p>An arbitrary number of additional special tokens, given as unnamed arguments.</p>
</dd>
</dl>
<dl class="simple">
<dt>t2i: T2I</dt><dd><p>New T2I object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="t2i.T2I.extend">
<code class="sig-name descname">extend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">corpus</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>Iterable<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">delimiter</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">' '</span></em><span class="sig-paren">)</span><a class="headerlink" href="#t2i.T2I.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend an existing T2I with tokens from a new tokens and build indices for them.</p>
<dl class="simple">
<dt>corpus: Corpus</dt><dd><p>Corpus that is being used to extend the index.</p>
</dd>
<dt>delimiter: str</dt><dd><p>Delimiter between tokens. Default is a whitespace ‘ ‘.</p>
</dd>
</dl>
<dl class="simple">
<dt>t2i: T2I</dt><dd><p>New T2I object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="t2i.T2I.from_file">
<em class="property">static </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">vocab_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'utf-8'</span></em>, <em class="sig-param"><span class="n">delimiter</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'\t'</span></em>, <em class="sig-param"><span class="n">counter</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>collections.Counter<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_size</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_freq</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">unk_token</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'&lt;unk&gt;'</span></em>, <em class="sig-param"><span class="n">eos_token</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'&lt;eos&gt;'</span></em>, <em class="sig-param"><span class="n">pad_token</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'&lt;pad&gt;'</span></em>, <em class="sig-param"><span class="n">special_tokens</span><span class="p">:</span> <span class="n">Iterable<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">()</span></em><span class="sig-paren">)</span><a class="headerlink" href="#t2i.T2I.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a T2I object from a file. This file can have two possible formats:</p>
<ol class="arabic simple">
<li><p>One token per line (in which case the index is the line number)</p></li>
<li><p>A token and its corresponding index, separated by some delimiter (default is ”       “):</p></li>
</ol>
<dl class="simple">
<dt>vocab_path: str</dt><dd><p>Path to vocabulary file.</p>
</dd>
<dt>encoding: str</dt><dd><p>Encoding of vocabulary file (default is ‘utf-8’).</p>
</dd>
<dt>delimiter: str</dt><dd><p>Delimiter in case the format is token &lt;delimiter&gt; index. Default is ‘       ‘.</p>
</dd>
<dt>counter: Optional[Counter]</dt><dd><p>Counter with token frequencies in corpus. Default is None.</p>
</dd>
<dt>max_size: Optional[int]</dt><dd><p>Maximum size of T2I index. Default is None, which means no maximum size.</p>
</dd>
<dt>min_freq: int</dt><dd><p>Minimum frequency of a token for it to be included in the index. Default is 1.</p>
</dd>
<dt>unk_token: str</dt><dd><p>Token that should be used for unknown words. Default is ‘STD_UNK’.</p>
</dd>
<dt>eos_token: str</dt><dd><p>Token that marks the end of a sequence. Default is ‘&lt;eos&gt;’.</p>
</dd>
<dt>pad_token: str</dt><dd><p>Padding token. Default is ‘&lt;pad&gt;’.</p>
</dd>
<dt>special_tokens: Iterable[str]</dt><dd><p>An arbitrary number of additional special tokens.</p>
</dd>
</dl>
<dl class="simple">
<dt>t2i: T2I</dt><dd><p>T2I object built from vocab file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="t2i.T2I.index">
<code class="sig-name descname">index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">corpus</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>Iterable<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">delimiter</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">' '</span></em>, <em class="sig-param"><span class="n">pad_to</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; <span class="p">[</span>typing.Iterable<span class="p">[</span>int<span class="p">]</span><span class="p">, </span>typing.Iterable<span class="p">[</span>typing.Iterable<span class="p">[</span>int<span class="p">]</span><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#t2i.T2I.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign indices to a sentence or a series of sentences.</p>
<dl class="simple">
<dt>corpus: Corpus</dt><dd><p>Corpus that is being indexed.</p>
</dd>
<dt>delimiter: str</dt><dd><p>Delimiter between tokens. Default is a whitespace ‘ ‘.</p>
</dd>
<dt>pad_to: Optional[Union[str, int]]</dt><dd><p>Indicate whether shorter sequences in this corpus should be padded up to the length of the longest sequence
(‘max’) or to a fixed length (any positive integer) or not not at all (None). Default is None.</p>
</dd>
</dl>
<dl class="simple">
<dt>indexed_corpus: IndexedCorpus</dt><dd><p>Indexed corpus.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="t2i.T2I.indices">
<code class="sig-name descname">indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Tuple[int, …]<a class="headerlink" href="#t2i.T2I.indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all indices in this T2I object.</p>
</dd></dl>

<dl class="py method">
<dt id="t2i.T2I.load">
<em class="property">static </em><code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#t2i.T2I.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load serialized T2I object.</p>
</dd></dl>

<dl class="py method">
<dt id="t2i.T2I.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#t2i.T2I.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save T2I object as pickle.</p>
</dd></dl>

<dl class="py method">
<dt id="t2i.T2I.t2i">
<em class="property">property </em><code class="sig-name descname">t2i</code><a class="headerlink" href="#t2i.T2I.t2i" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dictionary mapping tokens to unique indices.</p>
<dl class="simple">
<dt>t2i: Index</dt><dd><p>Dictionary mapping from tokens to indices.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="t2i.T2I.tokens">
<code class="sig-name descname">tokens</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Tuple[str, …]<a class="headerlink" href="#t2i.T2I.tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all token in this T2I object.</p>
</dd></dl>

<dl class="py method">
<dt id="t2i.T2I.unindex">
<code class="sig-name descname">unindex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indexed_corpus</span><span class="p">:</span> <span class="n"><span class="p">[</span>typing.Iterable<span class="p">[</span>int<span class="p">]</span><span class="p">, </span>typing.Iterable<span class="p">[</span>typing.Iterable<span class="p">[</span>int<span class="p">]</span><span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">joiner</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">' '</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>str<span class="p">, </span>Iterable<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#t2i.T2I.unindex" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert indices back to their original tokens. A joiner can be specified to determine how tokens are pieced
back together. If the joiner is None, the tokens are not joined and are simply returned as a list.</p>
<dl class="simple">
<dt>indexed_corpus: IndexedCorpus</dt><dd><p>An indexed corpus.</p>
</dd>
<dt>joiner: Optional[str]</dt><dd><p>String used to join tokens. Default is a whitespace ‘ ‘. If the value is None, tokens are not joined and a
list of tokens is returned.</p>
</dd>
</dl>
<dl class="simple">
<dt>corpus: Corpus</dt><dd><p>Un-indexed corpus.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
    </div>
      <div class="clearer"></div>
      </div>
    </div>
<footer class="footer d-flex justify-content-between flex-wrap">
    <div class="copyright">
        <div>&copy; Copyright 2020, Dennis Ulmer.</div>
      <div>Generated by <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.1.2 using <a href="https://github.com/myyasuda/sphinxbootstrap4theme">sphinxbootstrap4theme</a> 0.6.0.</div>
    </div>
    <div>
        <a href="#" class="btn btn-primary btn-sm" role="botton">Back to top</a>
    </div>
</footer>
  </body>
</html>